<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>üîû ÍµêÎ•òÌöåÏö©</title>
  <link rel="stylesheet" href="./style.css">
  <style>
    :root {
      --bg-1: #1a0b12;
      --bg-2: #2a1020;
      --bg-3: #4d0f2a;
    }
  </style>
</head>
<body>
  <main class="flow" aria-live="polite" aria-relevant="additions" aria-label="Îã®Í≥ÑÎ≥Ñ ÏñëÏãù">
      <h1 class="form-title">„Ääüîû ÍµêÎ•òÌöå ÏñëÏãù„Äã</h1>
      <p style="color:#fff5a7;padding:.5rem;font-weight:700;">Íπ°Í≥Ñ ÎòêÎäî ÍµêÎ•òÌöå Ï£ºÏµú Í≤ΩÌóò 5Ìöå Ïù¥ÌïòÏù∏ ÏûêÎäî üîû ÍµêÎ•òÌöå Ï£ºÏµú Î∂àÍ∞Ä</p>
      <!-- 1. ÍµêÎ•òÌöå ÏùºÏ†ï (ÎÇ†Ïßú, ÏãúÍ∞Ñ, ÌîΩÏóÖ Ïó¨Î∂Ä) -->
      <section class="step" data-require="selects">
        <div class="label">1. ÍµêÎ•òÌöå ÏùºÏ†ï</div>
        <div class="rules">
          <div class="rule-row">
            <div class="sub-label">ÎÇ†Ïßú</div>
            <div class="rule-field date">
              <div class="field-group">
                <label class="sr-only" for="m">Ïõî</label>
                <select id="m" class="sel month" required>
                  <option value="">Ïõî</option>
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                  <option value="6">6</option>
                  <option value="7">7</option>
                  <option value="8">8</option>
                  <option value="9">9</option>
                  <option value="10">10</option>
                  <option value="11">11</option>
                  <option value="12">12</option>
                </select><span class="suffix">Ïõî</span>
              </div>
              <div class="field-group">
                <label class="sr-only" for="d">Ïùº</label>
                <select id="d" class="sel day" required>
                  <option value="">Ïùº</option>
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                  <option value="6">6</option>
                  <option value="7">7</option>
                  <option value="8">8</option>
                  <option value="9">9</option>
                  <option value="10">10</option>
                  <option value="11">11</option>
                  <option value="12">12</option>
                  <option value="13">13</option>
                  <option value="14">14</option>
                  <option value="15">15</option>
                  <option value="16">16</option>
                  <option value="17">17</option>
                  <option value="18">18</option>
                  <option value="19">19</option>
                  <option value="20">20</option>
                  <option value="21">21</option>
                  <option value="22">22</option>
                  <option value="23">23</option>
                  <option value="24">24</option>
                  <option value="25">25</option>
                  <option value="26">26</option>
                  <option value="27">27</option>
                  <option value="28">28</option>
                  <option value="29">29</option>
                  <option value="30">30</option>
                  <option value="31">31</option>
                </select><span class="suffix">Ïùº</span>
              </div>
            </div>
          </div>
          <div class="rule-row">
            <div class="sub-label">ÏãúÍ∞Ñ</div>
            <div class="rule-field time">
              <div class="field-group">
                <label class="sr-only" for="sh">ÏãúÏûë ÏãúÍ∞Ñ Ïãú</label>
                <select id="sh" class="sel hour" required>
                  <option value="">Ïãú</option>
                  <option value="0">0</option>
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                  <option value="6">6</option>
                  <option value="7">7</option>
                  <option value="8">8</option>
                  <option value="9">9</option>
                  <option value="10">10</option>
                  <option value="11">11</option>
                  <option value="12">12</option>
                  <option value="13">13</option>
                  <option value="14">14</option>
                  <option value="15">15</option>
                  <option value="16">16</option>
                  <option value="17">17</option>
                  <option value="18">18</option>
                  <option value="19">19</option>
                  <option value="20">20</option>
                  <option value="21">21</option>
                  <option value="22">22</option>
                  <option value="23">23</option>
                </select><span class="suffix">Ïãú</span>
              </div>
              <div class="field-group">
                <label class="sr-only" for="sm">ÏãúÏûë ÏãúÍ∞Ñ Î∂Ñ</label>
                <select id="sm" class="sel minute" required>
                  <option value="">Î∂Ñ</option>
                  <option value="5">5</option>
                  <option value="10">10</option>
                  <option value="15">15</option>
                  <option value="20">20</option>
                  <option value="25">25</option>
                  <option value="30">30</option>
                  <option value="35">35</option>
                  <option value="40">40</option>
                  <option value="45">45</option>
                  <option value="50">50</option>
                  <option value="55">55</option>
                </select><span class="suffix">Î∂Ñ</span>
              </div>
              <span class="sep">~</span>
              <div class="field-group">
                <label class="sr-only" for="eh">Ï¢ÖÎ£å ÏãúÍ∞Ñ Ïãú</label>
                <select id="eh" class="sel hour" required>
                  <option value="">Ïãú</option>
                  <option value="0">0</option>
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                  <option value="6">6</option>
                  <option value="7">7</option>
                  <option value="8">8</option>
                  <option value="9">9</option>
                  <option value="10">10</option>
                  <option value="11">11</option>
                  <option value="12">12</option>
                  <option value="13">13</option>
                  <option value="14">14</option>
                  <option value="15">15</option>
                  <option value="16">16</option>
                  <option value="17">17</option>
                  <option value="18">18</option>
                  <option value="19">19</option>
                  <option value="20">20</option>
                  <option value="21">21</option>
                  <option value="22">22</option>
                  <option value="23">23</option>
                </select><span class="suffix">Ïãú</span>
              </div>
              <div class="field-group">
                <label class="sr-only" for="em">Ï¢ÖÎ£å ÏãúÍ∞Ñ Î∂Ñ</label>
                <select id="em" class="sel minute" required>
                  <option value="">Î∂Ñ</option>
                  <option value="5">5</option>
                  <option value="10">10</option>
                  <option value="15">15</option>
                  <option value="20">20</option>
                  <option value="25">25</option>
                  <option value="30">30</option>
                  <option value="35">35</option>
                  <option value="40">40</option>
                  <option value="45">45</option>
                  <option value="50">50</option>
                  <option value="55">55</option>
                </select><span class="suffix">Î∂Ñ</span>
              </div>
            </div>
          </div>
          <div class="rule-row">
            <div class="sub-label">ÌîΩÏóÖ Ïó¨Î∂Ä</div>
            <div class="rule-field">
              <label class="sr-only" for="pickup">ÌîΩÏóÖ Ïó¨Î∂Ä</label>
              <input id="pickup" class="txt title-half" type="text" placeholder="ÏòàÏãú: ÏóÜÏùå, 20Î∂ÑÎßàÎã§, 23ÏãúÏóê Ìïú Î≤à Îì±" required>
            </div>
          </div>
        </div>
      </section>

      <!-- 2. ÍµêÎ•òÌöå Ï†úÎ™© Î∞è ÎÇ¥Ïö© (ÌÖçÏä§Ìä∏) -->
      <section class="step collapsed" data-require="texts">
        <div class="label">2. ÍµêÎ•òÌöå Ï†úÎ™© Î∞è ÎÇ¥Ïö©</div>
        <div class="rules">
          <div class="rule-row">
            <div class="sub-label">Ï†úÎ™©</div>
            <div class="rule-field">
              <input id="title" class="txt title-big" type="text" placeholder="ÏòàÏãú: ÏïåÏùåÍµê, Ïñ¥Îë†Ïùò Î™∏Îßê ÍµêÎ•òÌöå Îì±" required>
            </div>
          </div>
          <div class="rule-row">
            <div class="sub-label">ÎÇ¥Ïö©</div>
            <div class="rule-field">
              <input id="desc" class="txt title-big" type="text" placeholder="ÏòàÏãú: Ï∞åÏ∞å Î≥¥Î©¥ÏÑú Ïà† Î®πÍ∏∞, ÏïåÎ™∏ÏúºÎ°ú Î™∏ÎßêÌïòÍ∏∞ Îì±" required>
            </div>
          </div>
        </div>
      </section>

      <!-- 3. Í∏∞Î≥∏ Í∑úÏπô -->
      <section class="step collapsed" data-require="rules">
        <div class="label">3. Í∏∞Î≥∏ Í∑úÏπô</div>
          <div class="rules">
            <div class="rule-row">
              <div class="sub-label">ÏßëÌï© Ïû•ÏÜå</div>
              <div class="rule-field">
                <div class="choicebar" role="group" data-target="worldName" data-target2="worldUrl" aria-label="ÏßëÌï© Ïû•ÏÜå ÏÑ†ÌÉù">
                  <button type="button" class="chip" data-value="New Arcalive" data-url="https://vrchat.com/home/world/wrld_c83f258f-e8f3-44a9-b8da-ed7a09e001c3">New Arcalive</button>
                  <button type="button" class="chip" data-value="Arcalive Î∂ÄÎÅÑÎü¨" data-url="https://vrchat.com/home/world/wrld_f760f71c-281d-4d26-93b3-0dbb983843ee" data-tooltip="Ï∂úÎ∞ú ÏãúÍ∞ÑÏù¥ Í≤πÏπòÏßÄ ÏïäÎäî Ïù¥ÏÉÅ New ArcaLiveÎ•º ÏµúÏö∞ÏÑ†ÏúºÎ°ú Ìï† Í≤É">Arcalive Î∂ÄÎÅÑÎü¨</button>
                  <button type="button" class="chip custom" data-tooltip="Ï∂úÎ∞ú ÏãúÍ∞ÑÏù¥ Í≤πÏπòÏßÄ ÏïäÎäî Ïù¥ÏÉÅ New ArcaliveÎ•º ÏµúÏö∞ÏÑ†ÏúºÎ°ú Ìï† Í≤É">Í∏∞ÌÉÄ</button>
                </div>
                <input type="text" class="txt title-half chip-input" placeholder="ÏõîÎìú Ïù¥Î¶Ñ" hidden>
                <input type="text" class="txt title-half chip-input" placeholder="ÏõîÎìú URL" hidden>
                <input type="hidden" id="worldName" required>
                <input type="hidden" id="worldUrl" required>
              </div>
            </div>
            <div class="rule-row">
              <div class="sub-label">ÍµêÎ•òÌöå Ï†ïÏõê</div>
              <div class="rule-field inline">
                <input id="quota" class="txt quota-small" type="text" placeholder="ÏòàÏãú: 20" required><span class="suffix">Î™Ö</span>
              </div>
            </div>
            <div class="rule-row">
              <div class="sub-label">ÌÖçÏä§Ï≥ê Î©îÎ™®Î¶¨ Ï†úÌïú</div>
              <div class="rule-field inline">
                <input id="texmem" class="txt quota-small" type="text" placeholder="ÏòàÏãú: 200" required><span class="suffix">MB</span>
              </div>
            </div>
          <div class="rule-row">
            <div class="sub-label">Í∏∞Í∏∞ Ï∞©Ïö© Ïó¨Î∂Ä</div>
            <div class="rule-field">
              <div class="choicebar" role="group" data-target="rule1" aria-label="Í∏∞Í∏∞ Ï∞©Ïö© Ïó¨Î∂Ä ÏÑ†ÌÉù">
                <button type="button" class="chip" data-value="device-free">ÏûêÏú†</button>
                <button type="button" class="chip" data-value="device-cam-req">Ï∫†Ìä∏ Ïù¥ÏÉÅ ÌïÑÏàò</button>
                <button type="button" class="chip" data-value="device-half-req">Î∞òÌä∏ Ïù¥ÏÉÅ ÌïÑÏàò</button>
                <button type="button" class="chip" data-value="device-full-req">ÌíÄÌä∏ ÌïÑÏàò</button>
                <button type="button" class="chip custom" data-input="rule1-custom">Í∏∞ÌÉÄ</button>
              </div>
              <input type="text" id="rule1-custom" class="txt title-half chip-input" placeholder="ÏòàÏãú: Ï∞®Î†∑ÎèÑ ÎêòÏßÄÎßå Í≤åÏûÑ Ï°∞ÏûëÏù¥ Ïñ¥Î†§ÏõÄ Îì±" hidden>
              <input type="hidden" id="rule1" required>
            </div>
          </div>
          <div class="rule-row">
            <div class="sub-label">Î¨µÏñ∏ ÌóàÏö© Ïó¨Î∂Ä</div>
            <div class="rule-field">
              <div class="choicebar" role="group" data-target="rule2" aria-label="Î¨µÏñ∏ ÌóàÏö© Ïó¨Î∂Ä ÏÑ†ÌÉù">
                <button type="button" class="chip" data-value="silence-allow">ÌóàÏö©</button>
                <button type="button" class="chip" data-value="silence-cam-allow">Ï∫†Ìä∏ Ïù¥ÏÉÅ ÌóàÏö©</button>
                <button type="button" class="chip" data-value="silence-half-allow">Î∞òÌä∏ Ïù¥ÏÉÅ ÌóàÏö©</button>
                <button type="button" class="chip" data-value="silence-full-allow">ÌíÄÌä∏Îßå ÌóàÏö©</button>
                <button type="button" class="chip" data-value="silence-ban">Í∏àÏßÄ</button>
                <button type="button" class="chip custom" data-input="rule2-custom">Í∏∞ÌÉÄ</button>
              </div>
              <input type="text" id="rule2-custom" class="txt title-half chip-input" placeholder="ÏòàÏãú: ÎßàÏù¥ÌÅ¨ Í∂åÏû•Ïù¥Í≥† ÌïÑÏàòÎäî ÏïÑÎãò Îì±" hidden>
              <input type="hidden" id="rule2" required>
            </div>
          </div>
          <div class="rule-row">
            <div class="sub-label">PCSS ÌóàÏö© Ïó¨Î∂Ä</div>
            <div class="rule-field">
              <div class="choicebar" role="group" data-target="rule3" aria-label="PCSS ÌóàÏö© Ïó¨Î∂Ä ÏÑ†ÌÉù">
                <button type="button" class="chip" data-value="pcss-allow">ÌóàÏö©</button>
                <button type="button" class="chip" data-value="pcss-ban">Í∏àÏßÄ</button>
                <button type="button" class="chip custom" data-input="rule3-custom">Í∏∞ÌÉÄ</button>
              </div>
              <input type="text" id="rule3-custom" class="txt title-half chip-input" placeholder="ÏòàÏãú: ÏÇ¨ÏßÑ ÍµêÎ•òÌöåÏóêÏÑú Ï¥¨ÏòÅ Ï§ëÏóêÎßå Î∂ÄÎ∂ÑÏ†Å ÌóàÏö© Îì±" hidden>
              <input type="hidden" id="rule3" required>
            </div>
          </div>
        </div>
      </section>

      <!-- 4. Î≥µÏû• Í∑úÏπô (Ïπ© Î≤ÑÌäº) -->
      <section class="step collapsed" data-require="choice">
        <div class="label">4. Î≥µÏû• Í∑úÏπô</div>
        <div class="choicebar" role="group" data-target="mode" data-desc-target="mode-desc" aria-label="Î≥µÏû• Í∑úÏπô ÏÑ†ÌÉù">
          <button type="button" class="chip" data-value="attire-conservative" data-desc="ÏùºÎ∞òÏ†ÅÏúºÎ°ú Í≥µÍ≥µÏû•ÏÜåÏóêÏÑú ÏûÖÏñ¥ÎèÑ Î¨∏Ï†ú ÏóÜÎäî Î≥µÏû•">Í±¥Ï†ÑÌïú Î≥µÏû•</button>
          <button type="button" class="chip" data-value="attire-moderate" data-desc="ÏÜçÏò∑, ÏàòÏòÅÎ≥µ, ÎπÑÌÇ§Îãà(ÎßàÏù¥ÌÅ¨Î°ú Ï†úÏô∏) Îì± 15Í∏à ÏàòÏúÑÏùò Î≥µÏû•">Ï†ÅÎãπÌïú ÎÖ∏Ï∂ú</button>
          <button type="button" class="chip" data-value="attire-free" data-desc="Î≥µÏû• Ï†úÌïú ÏóÜÏùå">ÏûêÏú† Î≥µÏû•</button>
          <button type="button" class="chip" data-value="attire-nude" data-desc="ÏïåÎ™∏, ÎòêÎäî Í∑∏Ïóê Ï§ÄÌïòÎäî Î≥µÏû•Îßå ÌóàÏö©">ÏïåÎ™∏Îßå ÌóàÏö©</button>
          <button type="button" class="chip custom" data-input="mode-custom">Í∏∞ÌÉÄ</button>
        </div>
        <p class="chip-desc" id="mode-desc" hidden></p>
        <input type="text" id="mode-custom" class="txt title-half chip-input" placeholder="ÏòàÏãú: Ïó≠Î∞îÎãà ÍµêÎ•òÌöåÎãàÍπå Ïó≠Î∞îÎãàÎßå ÌóàÏö© Îì±" hidden>
        <input type="hidden" id="mode" required>
      </section>

      <!-- 5. ÏÉÅÌò∏ÏûëÏö© Í∑úÏπô (Ïπ© Î≤ÑÌäº) -->
      <section class="step collapsed" data-require="choice">
        <div class="label">5. ÏÉÅÌò∏ÏûëÏö© Í∑úÏπô</div>
        <div class="choicebar" role="group" data-target="interaction" data-desc-target="interaction-desc" aria-label="ÏÉÅÌò∏ÏûëÏö© Í∑úÏπô ÏÑ†ÌÉù">
          <button type="button" class="chip" data-value="interaction-free" data-desc="Ïì∞Îã¥, Î≥º ÌÑ∞Ïπò Îì± Í≥µÍ≥µÏû•ÏÜåÏóêÏÑú Ìï¥ÎèÑ Î¨∏Ï†ú ÏóÜÎäî ÌñâÏúÑÎßå ÌóàÏö©">Í±¥Ï†ÑÌïòÍ≤å</button>
          <button type="button" class="chip" data-value="interaction-need" data-desc="ÌÇ§Ïä§, Í∞ÄÏä¥ ÌÑ∞Ïπò Îì± Í∑úÏπô ÏÉÅ ÏÑ±ÌñâÏúÑÏóê Ìè¨Ìï®ÌïòÏßÄ ÏïäÎäî ÌñâÏúÑÍπåÏßÄ ÌóàÏö©">ÏïΩÌïú ÏàòÏúÑ</button>
          <button type="button" class="chip" data-value="interaction-none" data-desc="ÏÉÅÌò∏ÏûëÏö© Ï†úÌïú ÏóÜÏùå">Ï†úÌïú ÏóÜÏùå</button>
          <button type="button" class="chip custom" data-input="interaction-custom">Í∏∞ÌÉÄ</button>
        </div>
        <p class="chip-desc" id="interaction-desc" hidden></p>
        <input type="text" id="interaction-custom" class="txt title-half chip-input" placeholder="ÏòàÏãú: Í∏∞Î≥∏ÏùÄ ÏïΩÌïú ÏàòÏúÑÍ≥† Î≤åÏπô ÌÉÄÏûÑÎßå Ï†úÌïú ÏóÜÏùå Îì±" hidden>
        <input type="hidden" id="interaction" required>
      </section>

      <!-- 6. Í∑∏ Ïô∏ ÏïàÎÇ¥ÏÇ¨Ìï≠ (ÌÖçÏä§Ìä∏) -->
      <section class="step collapsed" data-require="text">
        <div class="label">6. Í∑∏ Ïô∏ ÏïàÎÇ¥ÏÇ¨Ìï≠</div>
        <textarea id="notice" class="txt title-big triple" placeholder="ÏúÑÏóê ÏóÜÎäî ÎÇ¥Ïö© Ï§ë ÏïàÎÇ¥Ìï¥Ïïº Ìï† ÎÇ¥Ïö©Îì§ÏùÑ Í∏∞Ïû¨"></textarea>
      </section>

      <!-- 7. Í∑úÏπô ÏúÑÎ∞òÏãú Ï°∞Ïπò (ÌÖçÏä§Ìä∏) -->
      <section class="step collapsed" data-require="text">
        <div class="label">7. Í∑úÏπô ÏúÑÎ∞òÏãú Ï°∞Ïπò</div>
        <textarea id="penalty" class="txt title-big triple" placeholder="ÏòàÏãú: 1Ï∞® Í≤ΩÍ≥†/2Ï∞® ÌÇ•, Ï£ºÏµúÏûê ÏßÄÏãúÎ•º Îî∞Î•¥ÏßÄ ÏïäÏúºÎ©¥ Í∞ïÏ†ú Ìá¥Ïû• Ï°∞Ïπò Îì±"></textarea>
      </section>

    <!-- ÏôÑÎ£å Î≤ÑÌäº: ÎßàÏßÄÎßâ Îã®Í≥ÑÍπåÏßÄ Ï±ÑÏõåÏßÄÎ©¥ ÌëúÏãú -->
    <div class="nav collapsed">
      <button class="btn done" type="button">ÏôÑÎ£å</button>
    </div>

    <div id="result-popup" class="modal" hidden>
      <div class="modal-content">
        <button type="button" class="close-btn" aria-label="Îã´Í∏∞"><span aria-hidden="true">&times;</span></button>
        <p class="guide-text"><img src="001.png" alt="Ï∂úÎ†• ÌôúÏö© ÏïàÎÇ¥"><br><br>
          ‚ñ∑ ÏïÑÎûòÏóê ÏÉùÏÑ±Îêú ÎÇ¥Ïö©ÏùÑ Î™®ÏßëÍ∏Ä Ï†úÎ™©/ÎÇ¥Ïö©Ïóê Í∞ÅÍ∞Å Î≥µÏÇ¨ÌïòÍ∏∞<br>
          ‚ñ∑ ÎÇ¥Ïö© Î∂ÄÎ∂ÑÏùÄ PC Í∏ÄÏì∞Í∏∞ ÌôîÎ©¥ Í∏∞Ï§Ä Ïö∞ÏÉÅÎã®Ïóê ÏûàÎäî ÏΩîÎî© Î™®Îìú(Îπ®Í∞ÑÏÉâ Ïõê)Î°ú Îì§Ïñ¥Í∞Ñ Îã§Ïùå Î∂ôÏó¨ÎÑ£Í∏∞<br>
          - ÏñëÏãù Í¥ÄÎ¶¨ + ÌïòÏù¥ÌçºÎßÅÌÅ¨ Í∏∞Îä•ÏùÑ ÏúÑÌï¥ÏÑú ÏïΩÍ∞Ñ Î≤àÍ±∞Î°≠ÎçîÎùºÎèÑ ÏñëÌï¥ Î∞îÎûå<br>
          - Î™®Î∞îÏùºÏóêÏÑú ÏûëÏÑ± Ïãú Í≥µÏï±ÏùÄ ÏΩîÎî© Î™®ÎìúÍ∞Ä Î∂àÍ∞ÄÎä•ÌïòÎØÄÎ°ú Î∏åÎùºÏö∞Ï†ÄÎ°ú Îì§Ïñ¥Í∞ÄÏÑú Ïç®Ïïº Ìï®<br><br><hr><br></p>
        <div class="result-row">
          <label class="result-label" for="result-title">Î™®ÏßëÍ∏Ä Ï†úÎ™©</label>
          <input id="result-title" class="txt result-field" readonly>
        </div>
        <div class="result-row">
          <label class="result-label" for="result-body">Î™®ÏßëÍ∏Ä ÎÇ¥Ïö©</label>
          <textarea id="result-body" class="txt result-field" readonly></textarea>
        </div>
      </div>
    </div>
  </main>

  <script>
    const steps = [...document.querySelectorAll('.step')];
    const nav = document.querySelector('.nav');
    const popup = document.getElementById('result-popup');
    const resultTitle = document.getElementById('result-title');
    const resultBody = document.getElementById('result-body');
    const popupContent = popup.querySelector('.modal-content');
    popup.querySelector('.close-btn').addEventListener('click', () => {
      popupContent.classList.remove('show');
      popupContent.classList.add('hide');
      popupContent.addEventListener('animationend', () => {
        popup.hidden = true;
        popupContent.classList.remove('hide');
      }, { once: true });
    });

    let visibleCount = 1; // Ï≤òÏùåÏóî 1Í∞úÎßå Î≥¥ÏûÑ
    let doneShown = false;

    function setValidity(el, ok){ el.classList.toggle('is-valid', ok); }

      function validateStep(step){
        const type = step.dataset.require; let ok = false;
        if(type === 'selects'){
          const sels = step.querySelectorAll('select'); ok = true;
          sels.forEach(sel=>{ const v = sel.value !== ''; setValidity(sel, v); ok = ok && v; });
          const p = step.querySelector('#pickup');
          if(p){ const pv = !!p.value.trim(); setValidity(p, pv); ok = ok && pv; }
        } else if(type === 'select'){
          const sel = step.querySelector('select'); ok = !!sel && sel.value !== ''; setValidity(sel, ok);
        } else if(type === 'text'){
          const t = step.querySelector('.txt'); ok = !!t.value.trim(); setValidity(t, ok);
        } else if(type === 'texts'){
          const ts = step.querySelectorAll('.txt'); ok = true;
          ts.forEach(t=>{ const v = !!t.value.trim(); setValidity(t, v); ok = ok && v; });
        } else if(type === 'number'){
          const n = step.querySelector('.txt'); const v = Number(n.value); ok = Number.isFinite(v) && v > 0; setValidity(n, ok);
        } else if(type === 'choice'){
          const hs = step.querySelectorAll('input[type="hidden"]'); ok = true;
          hs.forEach(h=>{ const v = !!h.value; ok = ok && v; });
        } else if(type === 'rules'){
        const hs = step.querySelectorAll('input[type="hidden"]'); ok = true;
        hs.forEach(h=>{ const v = !!h.value; ok = ok && v; });
        const q = step.querySelector('#quota');
        const nv = Number(q.value); const qok = Number.isFinite(nv) && nv > 0; setValidity(q, qok); ok = ok && qok;
        const tm = step.querySelector('#texmem');
        const tv = Number(tm.value); const tmok = Number.isFinite(tv) && tv > 0; setValidity(tm, tmok); ok = ok && tmok;
      }
      return ok;
    }

      function animateReveal(el){
        el.classList.remove('collapsed');
        el.style.opacity = '0';
        el.style.transform = 'translateY(6px)';
        el.style.transition = 'none';
        requestAnimationFrame(()=>{
          el.style.transition = 'opacity .7s ease, transform .7s ease';
          el.style.opacity = '1';
          el.style.transform = 'none';
          el.addEventListener('transitionend', ()=>{
            el.style.transition = '';
            el.style.opacity = '';
            el.style.transform = '';
          }, { once:true });
        });
      }

      function revealNext(){
        if(visibleCount >= steps.length) return;
        if(visibleCount === 5){
          animateReveal(steps[5]);
          animateReveal(steps[6]);
          visibleCount += 2;
          return;
        }
        const next = steps[visibleCount];
        animateReveal(next);
        visibleCount++;
      }

    function showDone(){
      if(doneShown) return;
      doneShown = true;
      nav.classList.remove('collapsed');
      nav.style.opacity = '0';
      nav.style.transform = 'translateY(6px)';
      nav.style.transition = 'none';
      requestAnimationFrame(()=>{
        nav.style.transition = 'opacity .7s ease, transform .7s ease';
        nav.style.opacity = '1';
        nav.style.transform = 'none';
        nav.addEventListener('transitionend', ()=>{
          nav.style.transition = '';
          nav.style.opacity = '';
          nav.style.transform = '';
        }, { once:true });
      });
    }

    // Ï¥àÍ∏∞ Ï†ëÍ∏∞
    steps.slice(1).forEach(s => s.classList.add('collapsed'));

    // ÏûÖÎ†• Î≥ÄÌôî ‚Üí Ïú†Ìö®ÏÑ±/ÌÖåÎëêÎ¶¨ Í∞±Ïã† + ÏûêÎèô Îã§Ïùå Îã®Í≥Ñ ÌëúÏãú
    ['input','change'].forEach(ev=>{
      document.addEventListener(ev, e=>{
        const s = e.target.closest('.step');
        if(!s) return;
        const ok = validateStep(s);
        const idx = steps.indexOf(s);
        if(idx === visibleCount-1 && ok){
          if(idx === steps.length-1) showDone();
          else revealNext();
        }
      });
    });

    // Ïπ© ÏÑ†ÌÉù Ï≤òÎ¶¨
    document.addEventListener('click', (e)=>{
      const chip = e.target.closest('.chip');
      if(!chip) return;
      const bar = chip.closest('.choicebar');
      bar.querySelectorAll('.chip').forEach(c=>c.setAttribute('aria-pressed','false'));
      chip.setAttribute('aria-pressed','true');
      const stepEl = chip.closest('.step');
      const hidden = document.getElementById(bar.dataset.target);
      const hidden2 = document.getElementById(bar.dataset.target2);
      const descEl = document.getElementById(bar.dataset.descTarget);
      const field = bar.closest('.rule-field');
      const inputs = (field || stepEl).querySelectorAll('.chip-input');
      if(chip.classList.contains('custom')){
        if(descEl) descEl.hidden = true;
        inputs.forEach((input, idx)=>{
          input.hidden = false;
          if(idx === 0) input.focus();
          const h = idx === 0 ? hidden : hidden2;
          if(h) h.value = input.value.trim();
          input.oninput = () => {
            if(h) h.value = input.value.trim();
            validateStep(stepEl);
          };
        });
      } else {
        if(descEl){
          const d = chip.dataset.desc || '';
          descEl.textContent = d;
          descEl.hidden = d === '';
        }
        inputs.forEach(input=>{ input.hidden = true; input.value = ''; });
        if(hidden) hidden.value = chip.dataset.value;
        if(hidden2) hidden2.value = chip.dataset.url || '';
      }
      const ok = validateStep(stepEl);
      const idx = steps.indexOf(stepEl);
      if(idx === visibleCount-1 && ok){
        if(idx === steps.length-1) showDone();
        else revealNext();
      }
    });

    document.querySelector('.btn.done').addEventListener('click', () => {
      const getChipText = id => {
        const bar = document.querySelector(`[data-target="${id}"]`);
        if(!bar) return '';
        const chip = bar.querySelector('.chip[aria-pressed="true"]');
        if(!chip) return '';
        if(chip.classList.contains('custom')){
          const input = document.getElementById(`${id}-custom`);
          return input ? input.value.trim() : '';
        }
        return chip.textContent.trim();
      };
      const m = document.getElementById('m').value;
      const d = document.getElementById('d').value;
      const sh = document.getElementById('sh').value;
      const sm = document.getElementById('sm').value;
      const eh = document.getElementById('eh').value;
      const em = document.getElementById('em').value;
      const title = document.getElementById('title').value.trim();
      const pickup = document.getElementById('pickup').value.trim();
      const desc = document.getElementById('desc').value.trim();
      const quota = document.getElementById('quota').value.trim();
      const texmem = document.getElementById('texmem').value.trim();
      const worldName = document.getElementById('worldName').value.trim();
      const worldUrl = document.getElementById('worldUrl').value.trim();
      const rule1 = getChipText('rule1');
      const rule2 = getChipText('rule2');
      const rule3 = getChipText('rule3');
      const getChoiceInfo = id => {
        const bar = document.querySelector(`[data-target="${id}"]`);
        const chip = bar?.querySelector('.chip[aria-pressed="true"]');
        if(!chip) return { text:'', desc:'' };
        if(chip.classList.contains('custom')){
          const input = document.getElementById(`${id}-custom`);
          return { text: input.value.trim(), desc: '' };
        }
        return { text: chip.textContent.trim(), desc: chip.dataset.desc || '' };
      };
      const modeInfo = getChoiceInfo('mode');
      const interactionInfo = getChoiceInfo('interaction');
      const notice = document.getElementById('notice').value.trim();
      const penalty = document.getElementById('penalty').value.trim();
      const pad = n => n.toString().padStart(2,'0');
      const dateStr = `${pad(m)}/${pad(d)}`;
      const timeStr = `${pad(sh)}:${pad(sm)}~${pad(eh)}:${pad(em)}`;
      const lines = [];
      lines.push(`<p><strong style="font-size: 24px;">‚ë† ÍµêÎ•òÌöå ÎÇ¥Ïö©</strong></p>`);
      lines.push(`<p>${desc}</p>`);
      lines.push(`<br>`);
      lines.push(`<p><strong style="font-size: 24px;">‚ë° ÍµêÎ•òÌöå Í∑úÏπô</strong></p>`);
      lines.push(`<p>&lt;ÌïÑÎèÖ&gt;</p>`);
      lines.push(`<p>&nbsp;- ÍµêÎ•òÌöå Ï§ëÏóî ÏµúÏÜå Ï£ºÌô©Î∂àÎ°ú ÏÑ§Ï†ï, ÏûÑÏùòÎ°ú Ìè¨ÌÉà ÏÑ§Ïπò Í∏àÏßÄ</p>`);
      lines.push(`<p>&nbsp;- Îß§ÎÑàÏóê Ïñ¥Í∏ãÎÇòÎäî ÌñâÎèô Í∏àÏßÄ</p>`);
      lines.push(`<p>&nbsp;- Ï±ÑÎÑê Í∑úÏπôÏóêÏÑú 'Ï∞∏Í∞ÄÏûêÏö© ÏïàÎÇ¥ÏÇ¨Ìï≠' ÏùΩÏñ¥Î≥¥Í∏∞</p>`);
      lines.push(`<br>`);
      lines.push(`<p>&lt;Í∏∞Î≥∏ Í∑úÏπô&gt;</p>`);
      lines.push(`<p>&nbsp;- ÏßëÌï© Ïû•ÏÜå: <a href="${worldUrl}" target="_blank">${worldName}</a></p>`);
      lines.push(`<p>&nbsp;- ÍµêÎ•òÌöå Ï†ïÏõê: ${quota}Î™Ö</p>`);
      lines.push(`<p>&nbsp;- ÌÖçÏä§Ï≥ê Î©îÎ™®Î¶¨ Ï†úÌïú: ${texmem}MB</p>`);
      lines.push(`<p>&nbsp;- Í∏∞Í∏∞ Ï∞©Ïö© Ïó¨Î∂Ä: ${rule1}</p>`);
      lines.push(`<p>&nbsp;- Î¨µÏñ∏ ÌóàÏö© Ïó¨Î∂Ä: ${rule2}</p>`);
      lines.push(`<p>&nbsp;- PCSS ÌóàÏö© Ïó¨Î∂Ä: ${rule3}</p>`);
      lines.push(`<br>`);
      lines.push(`<p>&lt;Î≥µÏû• Í∑úÏπô&gt;</p>`);
      lines.push(`<p>${modeInfo.text}${modeInfo.desc ? ` <span style="font-size: 12px;">(${modeInfo.desc})</span>` : ''}</p>`);
      lines.push(`<br>`);
      lines.push(`<p>&lt;ÏÉÅÌò∏ÏûëÏö© Í∑úÏπô&gt;</p>`);
      lines.push(`<p>${interactionInfo.text}${interactionInfo.desc ? ` <span style="font-size: 12px;">(${interactionInfo.desc})</span>` : ''}</p>`);
      lines.push(`<br>`);
      lines.push(`<p>&lt;ÌîΩÏóÖ Ïó¨Î∂Ä&gt;</p>`);
      lines.push(`<p>${pickup}</p>`);
      lines.push(`<br>`);
      lines.push(`<p><strong style="font-size: 24px;">‚ë¢ Í∑∏ Ïô∏ ÏïàÎÇ¥ÏÇ¨Ìï≠</strong></p>`);
      lines.push(`<p>${notice}</p>`);
      lines.push(`<br>`);
      lines.push(`<p><strong style="font-size: 24px;">‚ë£ Í∑úÏπô ÏúÑÎ∞ò Ïãú Ï°∞Ïπò</strong></p>`);
      lines.push(`<p>${penalty}</p>`);
        const html = lines.join('\n');
      const titleStr = `[${dateStr} ${timeStr}] ${title}`;
      resultTitle.value = titleStr;
      resultBody.value = html;
      navigator.clipboard?.writeText(html).catch(()=>{});
      popup.hidden = false;
      popupContent.classList.remove('hide');
      void popupContent.offsetWidth;
      popupContent.classList.add('show');
    });
  </script>
</body>
</html>
